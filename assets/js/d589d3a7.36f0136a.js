"use strict";(self.webpackChunkapache_website_template=self.webpackChunkapache_website_template||[]).push([[924],{3774:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var i=n(6672);const s={},a=i.createContext(s);function r(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:t},e.children)}},7081:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"getting-started","title":"Getting Started","description":"Installation","source":"@site/docs/getting-started.md","sourceDirName":".","slug":"/getting-started","permalink":"/docs/getting-started","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/otava-website/tree/master/docs/getting-started.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Installation","permalink":"/docs/install"},"next":{"title":"Setting up for development","permalink":"/docs/contribute"}}');var s=n(3420),a=n(3774);const r={},o="Getting Started",l={},c=[{value:"Installation",id:"installation",level:2},{value:"Setup",id:"setup",level:2},{value:"Defining tests",id:"defining-tests",level:2},{value:"Listing Available Tests",id:"listing-available-tests",level:2},{value:"Listing Available Metrics for Tests",id:"listing-available-metrics-for-tests",level:2},{value:"Finding Change Points",id:"finding-change-points",level:2},{value:"Example",id:"example",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"getting-started",children:"Getting Started"})}),"\n",(0,s.jsx)(t.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(t.p,{children:"Otava requires Python 3.8.  If you don't have Python 3.8, use pyenv to install it."}),"\n",(0,s.jsx)(t.p,{children:"Use pipx to install otava:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"pipx install git+ssh://git@github.com/apache/otava\n"})}),"\n",(0,s.jsx)(t.h2,{id:"setup",children:"Setup"}),"\n",(0,s.jsxs)(t.p,{children:["Copy the main configuration file ",(0,s.jsx)(t.code,{children:"resources/otava.yaml"})," to ",(0,s.jsx)(t.code,{children:"~/.otava/otava.yaml"})," and adjust data source configuration."]}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsxs)(t.p,{children:["See docs on specific data sources to learn more about their configuration - ",(0,s.jsx)(t.a,{href:"/docs/csv",children:"CSV"}),", ",(0,s.jsx)(t.a,{href:"/docs/graphite",children:"Graphite"}),",\n",(0,s.jsx)(t.a,{href:"/docs/postgresql",children:"PostgreSQL"}),", or ",(0,s.jsx)(t.a,{href:"/docs/big-query",children:"BigQuery"}),"."]})}),"\n",(0,s.jsx)(t.p,{children:"Alternatively, it is possible to leave the config file as is, and provide credentials in the environment\nby setting appropriate environment variables.\nEnvironment variables are interpolated before interpreting the configuration file."}),"\n",(0,s.jsx)(t.h2,{id:"defining-tests",children:"Defining tests"}),"\n",(0,s.jsxs)(t.p,{children:["All test configurations are defined in the main configuration file.\nOtava supports reading data from and publishing results to a CSV file, ",(0,s.jsx)(t.a,{href:"https://graphiteapp.org/",children:"Graphite"}),",\n",(0,s.jsx)(t.a,{href:"https://www.postgresql.org/",children:"PostgreSQL"}),", and ",(0,s.jsx)(t.a,{href:"https://cloud.google.com/bigquery",children:"BigQuery"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["Tests are defined in the ",(0,s.jsx)(t.code,{children:"tests"})," section. For example, the following definition will import results of the test from a CSV file:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:'tests:\n  local.sample:\n    type: csv\n    file: tests/resources/sample.csv\n    time_column: time\n    metrics: [metric1, metric2]\n    attributes: [commit]\n    csv_options:\n      delimiter: ","\n      quote_char: "\'"\n'})}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"time_column"})," property points to the name of the column storing the timestamp\nof each test-run. The data points will be ordered by that column."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"metrics"})," property selects the columns that hold the values to be analyzed. These values must\nbe numbers convertible to floats. The ",(0,s.jsx)(t.code,{children:"metrics"})," property can be not only a simple list of column\nnames, but it can also be a dictionary configuring other properties of each metric,\nthe column name or direction:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"metrics:\n  resp_time_p99:\n    direction: -1\n    column: p99\n"})}),"\n",(0,s.jsx)(t.p,{children:"Direction can be 1 or -1. If direction is set to 1, this means that the higher the metric, the\nbetter the performance is. If it is set to -1, higher values mean worse performance."}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"attributes"})," property describes any other columns that should be attached to the final\nreport. Special attribute ",(0,s.jsx)(t.code,{children:"version"})," and ",(0,s.jsx)(t.code,{children:"commit"})," can be used to query for a given time-range."]}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsxs)(t.p,{children:["To learn how to avoid repeating the same configuration in multiple tests, see ",(0,s.jsx)(t.a,{href:"/docs/basics#avoiding-test-definition-duplication",children:"Avoiding test definition duplication"}),"."]})}),"\n",(0,s.jsx)(t.h2,{id:"listing-available-tests",children:"Listing Available Tests"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"otava list-groups\notava list-tests [group name]\n"})}),"\n",(0,s.jsx)(t.h2,{id:"listing-available-metrics-for-tests",children:"Listing Available Metrics for Tests"}),"\n",(0,s.jsx)(t.p,{children:"To list all available metrics defined for the test:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"otava list-metrics <test>\n"})}),"\n",(0,s.jsx)(t.h2,{id:"finding-change-points",children:"Finding Change Points"}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsxs)(t.p,{children:["For more details, see ",(0,s.jsx)(t.a,{href:"/docs/basics#finding-change-points",children:"Finding Change Points"})," and\n",(0,s.jsx)(t.a,{href:"/docs/basics#validating-performance-of-a-feature-branch",children:"Validating Performance of a Feature Branch"}),"."]})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"otava analyze <test>...\notava analyze <group>...\n"})}),"\n",(0,s.jsx)(t.p,{children:"This command prints interesting results of all runs of the test and a list of change-points."}),"\n",(0,s.jsx)(t.p,{children:"A change-point is a moment when a metric value starts to differ significantly from the values of the earlier runs and\nwhen the difference is statistically significant."}),"\n",(0,s.jsx)(t.p,{children:"Otava calculates the probability (P-value) that the change point was not caused by chance - the closer to zero, the more\ncertain it is about the regression or performance improvement. The smaller the magnitude of the change, the\nmore data points are needed to confirm the change, therefore Otava may not notice the regression immediately after the first run\nthat regressed."}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"analyze"})," command accepts multiple tests or test groups.\nThe results are simply concatenated."]}),"\n",(0,s.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"$ otava analyze local.sample\nINFO: Computing change points for test sample.csv...\nsample:\ntime                         metric1    metric2\n-------------------------  ---------  ---------\n2021-01-01 02:00:00 +0000     154023      10.43\n2021-01-02 02:00:00 +0000     138455      10.23\n2021-01-03 02:00:00 +0000     143112      10.29\n2021-01-04 02:00:00 +0000     149190      10.91\n2021-01-05 02:00:00 +0000     132098      10.34\n2021-01-06 02:00:00 +0000     151344      10.69\n                                      \xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\n                                         -12.9%\n                                      \xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\n2021-01-07 02:00:00 +0000     155145       9.23\n2021-01-08 02:00:00 +0000     148889       9.11\n2021-01-09 02:00:00 +0000     149466       9.13\n2021-01-10 02:00:00 +0000     148209       9.03\n"})})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);